<div fxLayout="column" id="generalContainer">

  <div fxLayout="column" id="gendersDistributionSection">
    <h3 fxFlexAlign="center">Gender Distribution</h3>
    <div fxLayout="row" id="gendersTableAndChartRow">

      <div fxFlex="60" id="gendersTable">
        <div class="table-header">
          <mat-form-field>
            <input matInput (keyup)="applyGenderFilter($event.target.value)" placeholder="Filter">
          </mat-form-field>
        </div>

        <mat-table #table [dataSource]="gendersDataSource">
          <!-- Gender Column -->
          <ng-container matColumnDef="gender">
            <mat-header-cell *matHeaderCellDef> Gender </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.gender}} </mat-cell>
          </ng-container>

          <!-- Amount Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell *matHeaderCellDef> Number of characters </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.amount}} </mat-cell>
          </ng-container>

          <!-- Percentage Column -->
          <ng-container matColumnDef="percentage">
            <mat-header-cell *matHeaderCellDef> Percentage </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.percentage}}% </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedGenderColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedGenderColumns;"></mat-row>
        </mat-table>
      </div>

      <div fxFlex="40" id="gendersChart">
        <div style="display: block">
          <canvas baseChart [data]="gendersChartData" [labels]="gendersChartLabels" [chartType]="'pie'"
                  [options]="{legend: {display: false}}">
          </canvas>
        </div>
      </div>

    </div>
  </div>

  <div fxLayout="column" id="racesDistributionSection">
    <h3 fxFlexAlign="center">Race Distribution</h3>

    <div fxLayout="row" id="racesTableAndChartRow">

      <div fxFlex="40" id="racesChart">
          <canvas baseChart [data]="racesChartData" [labels]="racesChartLabels" [chartType]="'pie'"
                  [options]="{legend: {display: false}}">
          </canvas>
      </div>

      <div fxFlex="60" id="racesTable">
        <div class="table-header">
          <mat-form-field>
            <input matInput (keyup)="applyRaceFilter($event.target.value)" placeholder="Filter">
          </mat-form-field>
        </div>
        <mat-table #table [dataSource]="racesDataSource">
          <!-- Gender Column -->
          <ng-container matColumnDef="race">
            <mat-header-cell *matHeaderCellDef> Race </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.race}} </mat-cell>
          </ng-container>

          <!-- Amount Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell *matHeaderCellDef> Number of characters </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.amount}} </mat-cell>
          </ng-container>

          <!-- Percentage Column -->
          <ng-container matColumnDef="percentage">
            <mat-header-cell *matHeaderCellDef> Percentage </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.percentage}}% </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedRaceColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedRaceColumns;"></mat-row>
        </mat-table>
      </div>
    </div>
  </div>

  <div fxLayout="column" id="citizenshipDistributionSection">
    <h3 fxFlexAlign="center">Citizenship Distribution</h3>
    <div fxLayout="row" id="citizenshipTableAndChartRow">

      <div fxFlex="60" id="citizenshipsTable">
        <div class="table-header">
          <mat-form-field>
            <input matInput (keyup)="applyCitizenshipFilter($event.target.value)" placeholder="Filter">
          </mat-form-field>
        </div>

        <mat-table #table [dataSource]="citizenshipsDataSource">
          <!-- Gender Column -->
          <ng-container matColumnDef="citizenship">
            <mat-header-cell *matHeaderCellDef> Citizenship </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.citizenship}} </mat-cell>
          </ng-container>

          <!-- Amount Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell *matHeaderCellDef> Number of characters </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.amount}} </mat-cell>
          </ng-container>

          <!-- Percentage Column -->
          <ng-container matColumnDef="percentage">
            <mat-header-cell *matHeaderCellDef> Percentage </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.percentage}}% </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedCitizenshipColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedCitizenshipColumns;"></mat-row>
        </mat-table>
      </div>

      <div fxFlex="40" id="citizenshipsChart">
          <canvas baseChart [data]="citizenshipsChartData" [labels]="citizenshipsChartLabels"
                  [chartType]="'pie'" [options]="{legend: {display: false}}">
          </canvas>
      </div>

    </div>
  </div>

  <div fxLayout="column" id="orientationDistributionSection">
    <h3 fxFlexAlign="center">Orientation Distribution</h3>

    <div fxLayout="row" id="orientationTableAndChartRow">
      <div fxFlex="40" id="orientationsChart">
          <canvas baseChart [data]="orientationsChartData" [labels]="orientationsChartLabels" [chartType]="'pie'"
                  [options]="{legend: {display: false}}">
          </canvas>
      </div>
      <div fxFlex="60" id="orientationsTable">
        <div class="table-header">
          <mat-form-field>
            <input matInput (keyup)="applyOrientationFilter($event.target.value)" placeholder="Filter">
          </mat-form-field>
        </div>
        <mat-table #table [dataSource]="orientationsDataSource">
          <!-- Gender Column -->
          <ng-container matColumnDef="orientation">
            <mat-header-cell *matHeaderCellDef> Orientation </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.orientation}} </mat-cell>
          </ng-container>

          <!-- Amount Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell *matHeaderCellDef> Number of characters </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.amount}} </mat-cell>
          </ng-container>

          <!-- Percentage Column -->
          <ng-container matColumnDef="percentage">
            <mat-header-cell *matHeaderCellDef> Percentage </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.percentage}}% </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedOrientationColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedOrientationColumns;"></mat-row>
        </mat-table>
      </div>
    </div>
  </div>

  <div fxLayout="row" fxFlexOffset="2">
    <div fxLayout="column" id="densitySection" fxLayoutAlign="center" fxFlex="45">
      <h3 fxFlexAlign="center">Density</h3>
      <div class="table-header">
        <mat-form-field>
          <input matInput (keyup)="applyDensityFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>
      </div>
      <mat-table #table [dataSource]="densityDataSource">
        <!-- Character Column -->
        <ng-container matColumnDef="character">
          <mat-header-cell *matHeaderCellDef> Character </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.character}} </mat-cell>
        </ng-container>

        <!-- Density Column -->
        <ng-container matColumnDef="density">
          <mat-header-cell *matHeaderCellDef> Density </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.density}} </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedDensityColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedDensityColumns;"></mat-row>
      </mat-table>
    </div>

    <div fxLayout="column" fxFlex="45" fxLayoutAlign="start" fxFlexOffset="5">
      <h3 fxFlexAlign="center">Homophily</h3>
      <mat-horizontal-stepper [linear]="isLinear" #stepper="matHorizontalStepper">
        <mat-step [stepControl]="byFormGroup">
          <form [formGroup]="byFormGroup" fxLayout="column">
            <ng-template matStepLabel>Category</ng-template>
            <mat-form-field>
              <mat-select placeholder="Select category" formControlName="byCtrl" required
                          (change)="selectedCategory = $event.value">
                <mat-option *ngFor="let category of categories" [value]="category">
                  {{ category }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div fxFlexAlign="center">
              <button mat-button matStepperNext>Next</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="parameterFormGroup">
          <form [formGroup]="parameterFormGroup" fxLayout="column">
            <ng-template matStepLabel>Value</ng-template>
            <mat-form-field>
              <mat-select placeholder="Select value" formControlName="parameterCtrl" required
                          (change)="selectedParameter = $event.value">
                <mat-option *ngFor="let parameter of parameters[selectedCategory]" [value]="parameter">
                  {{ parameter }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div fxFlexAlign="center">
              <button mat-button matStepperNext>Next</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="significanceFormGroup">
          <form [formGroup]="significanceFormGroup">
            <ng-template matStepLabel>Significance</ng-template>
            <mat-form-field>
              <mat-select placeholder="Select significance level" formControlName="significanceCtrl" required
                          (change)="selectedSignificance = $event.value">
                <mat-option *ngFor="let significance of significanceLevels" [value]="significance">
                  {{ significance }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div fxLayout="row" fxLayoutAlign="center">
              <div>
                <button mat-button (click)="checkHomophilyPressed()">Check homophily</button>
              </div>
            </div>
            <div *ngIf="homophilyResult.available">
              <p>
                {{homophilyResult.checkingWhatMessage}}
                <br>
                {{homophilyResult._2pqMessage}}
                <br>
                {{homophilyResult.actual2pqMessage}}
                <br>
                {{homophilyResult.conclusion}}
              </p>
            </div>
          </form>
        </mat-step>
      </mat-horizontal-stepper>
    </div>
  </div>
</div>
















